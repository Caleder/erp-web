{"version":3,"sources":["webpack:///./src/components/refund/Save.vue?a6cf","webpack:///src/components/refund/Save.vue","webpack:///./src/components/refund/Save.vue?88ea","webpack:///./src/components/refund/Save.vue","webpack:///./src/components/refund/List.vue?d2c6","webpack:///src/components/refund/List.vue","webpack:///./src/components/refund/List.vue?96df","webpack:///./src/components/refund/List.vue","webpack:///./src/components/refund/List.vue?18a1","webpack:///./src/components/refund/Save.vue?e148"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","path","_v","ref","saveForm","saveFormRules","model","value","callback","$$v","$set","expression","_l","supplier","key","id","name","on","$event","showProductAddDialog","productList","scopedSlots","_u","fn","scope","showProductEditDialog","row","$index","deleteProduct","_n","slot","selectAccountChanged","account","saveRefund","saveRefundThenNew","isProductAdd","saveProductDialogVisible","saveProductDialogClosed","saveProductForm","saveProductFormRules","showSelectProductDialog","selectWarehouseChanged","warehouse","staticClass","saveProduct","selectProductDialogVisible","handleSelectProduct","staticRenderFns","data","supplierList","refundCode","accountList","discountRate","discountedAmount","totalAmount","refundAmount","debtAmount","modifyProductIndex","quantity","price","discountAmount","amount","productName","warehouseId","productParams","query","categoryId","current","size","warehouseList","created","undefined","refundId","getRefundDetail","getRefundCode","getSupplierList","getAccountList","getWarehouseList","methods","accountId","push","$_","cloneDeep","contact","index","$refs","saveProductFormRef","resetFields","validate","product","productId","unitName","find","warehouseName","component","rangedDate","getRefundPage","params","search","clear","goAddPage","refundList","refundStatus","_e","refundCheckedSwitch","goEditPage","deleteRefund","total","handleSizeChange","handleCurrentChange","watch","startDate","endDate","$router"],"mappings":"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","file":"js/Refund.ed5820ed.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/home' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"基础管理\")]),_c('el-breadcrumb-item',[_vm._v(\"退货单新增\")])],1),_c('el-card',[_c('el-form',{ref:\"saveFormRef\",attrs:{\"model\":_vm.saveForm,\"rules\":_vm.saveFormRules,\"label-width\":\"100px\"}},[_c('el-row',[_c('el-col',{attrs:{\"span\":8}},[_c('el-form-item',{attrs:{\"label\":\"供应商\",\"prop\":\"supplierId\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择供应商\"},model:{value:(_vm.saveForm.supplierId),callback:function ($$v) {_vm.$set(_vm.saveForm, \"supplierId\", $$v)},expression:\"saveForm.supplierId\"}},_vm._l((_vm.supplierList),function(supplier){return _c('el-option',{key:supplier.id,attrs:{\"label\":supplier.name,\"value\":supplier.id}})}),1)],1)],1),_c('el-col',{attrs:{\"span\":8}},[_c('el-form-item',{attrs:{\"label\":\"单据日期\",\"prop\":\"issueDate\"}},[_c('el-date-picker',{attrs:{\"type\":\"date\",\"value-format\":\"yyyy-MM-dd\",\"placeholder\":\"选择日期\"},model:{value:(_vm.saveForm.issueDate),callback:function ($$v) {_vm.$set(_vm.saveForm, \"issueDate\", $$v)},expression:\"saveForm.issueDate\"}})],1)],1),_c('el-col',{attrs:{\"span\":8}},[_c('el-form-item',{attrs:{\"label\":\"单据编号\",\"prop\":\"code\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.saveForm.code),callback:function ($$v) {_vm.$set(_vm.saveForm, \"code\", $$v)},expression:\"saveForm.code\"}})],1)],1)],1),_c('el-row',[_c('el-card',[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":4}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.showProductAddDialog()}}},[_vm._v(\"新增商品\")])],1)],1),_c('el-table',{attrs:{\"data\":_vm.saveForm.productList,\"border\":\"\",\"stripe\":\"\",\"height\":\"300\"}},[_c('el-table-column',{attrs:{\"label\":\"商品\",\"prop\":\"productName\"}}),_c('el-table-column',{attrs:{\"label\":\"单位\",\"prop\":\"unitName\"}}),_c('el-table-column',{attrs:{\"label\":\"仓库\",\"prop\":\"warehouseName\"}}),_c('el-table-column',{attrs:{\"label\":\"数量\",\"prop\":\"quantity\"}}),_c('el-table-column',{attrs:{\"label\":\"购货单价\",\"prop\":\"price\"}}),_c('el-table-column',{attrs:{\"label\":\"折扣率(%)\",\"prop\":\"discountRate\"}}),_c('el-table-column',{attrs:{\"label\":\"折扣额\",\"prop\":\"discountAmount\"}}),_c('el-table-column',{attrs:{\"label\":\"购货金额\",\"prop\":\"amount\"}}),_c('el-table-column',{attrs:{\"label\":\"序列号\",\"prop\":\"code\"}}),_c('el-table-column',{attrs:{\"label\":\"备注\",\"prop\":\"remark\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"120px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tooltip',{attrs:{\"effect\":\"dark\",\"content\":\"修改\",\"placement\":\"top\",\"enterable\":false}},[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.showProductEditDialog(scope.row, scope.$index)}}})],1),_c('el-tooltip',{attrs:{\"effect\":\"dark\",\"content\":\"删除\",\"placement\":\"top\",\"enterable\":false}},[_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.deleteProduct(scope.row)}}})],1)]}}])})],1)],1)],1),_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_vm._v(\"结算信息\")]),_c('el-row',[_c('el-col',{attrs:{\"span\":5}},[_c('el-form-item',{attrs:{\"label\":\"优惠率\",\"prop\":\"discountRate\"}},[_c('el-input',{model:{value:(_vm.saveForm.discountRate),callback:function ($$v) {_vm.$set(_vm.saveForm, \"discountRate\", _vm._n($$v))},expression:\"saveForm.discountRate\"}},[_c('template',{slot:\"append\"},[_vm._v(\"%\")])],2)],1)],1),_c('el-col',{attrs:{\"span\":5}},[_c('el-form-item',{attrs:{\"label\":\"优惠金额\",\"prop\":\"discountedAmount\"}},[_c('el-input',{model:{value:(_vm.saveForm.discountedAmount),callback:function ($$v) {_vm.$set(_vm.saveForm, \"discountedAmount\", $$v)},expression:\"saveForm.discountedAmount\"}})],1)],1),_c('el-col',{attrs:{\"span\":5}},[_c('el-form-item',{attrs:{\"label\":\"优惠后金额\",\"prop\":\"totalAmount\"}},[_c('el-input',{model:{value:(_vm.saveForm.totalAmount),callback:function ($$v) {_vm.$set(_vm.saveForm, \"totalAmount\", $$v)},expression:\"saveForm.totalAmount\"}})],1)],1),_c('el-col',{attrs:{\"span\":5}},[_c('el-form-item',{attrs:{\"label\":\"本次退款\",\"prop\":\"refundAmount\"}},[_c('el-input',{model:{value:(_vm.saveForm.refundAmount),callback:function ($$v) {_vm.$set(_vm.saveForm, \"refundAmount\", $$v)},expression:\"saveForm.refundAmount\"}})],1)],1)],1),_c('el-row',[_c('el-col',{attrs:{\"span\":5}},[_c('el-form-item',{attrs:{\"label\":\"结算账户\",\"prop\":\"accountId\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择结算账户\"},on:{\"change\":_vm.selectAccountChanged},model:{value:(_vm.saveForm.accountId),callback:function ($$v) {_vm.$set(_vm.saveForm, \"accountId\", $$v)},expression:\"saveForm.accountId\"}},_vm._l((_vm.accountList),function(account){return _c('el-option',{key:account.id,attrs:{\"label\":account.name,\"value\":account.id}})}),1)],1)],1),_c('el-col',{attrs:{\"span\":5}},[_c('el-form-item',{attrs:{\"label\":\"本次欠款\",\"prop\":\"debtAmount\"}},[_c('el-input',{model:{value:(_vm.saveForm.debtAmount),callback:function ($$v) {_vm.$set(_vm.saveForm, \"debtAmount\", $$v)},expression:\"saveForm.debtAmount\"}})],1)],1),_c('el-col',{attrs:{\"span\":5}},[_c('el-form-item',{attrs:{\"label\":\"采购合同\",\"prop\":\"contracts\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.saveForm.contracts),callback:function ($$v) {_vm.$set(_vm.saveForm, \"contracts\", $$v)},expression:\"saveForm.contracts\"}})],1)],1)],1),_c('el-row',[_c('el-col',{attrs:{\"span\":5}},[_c('el-form-item',{attrs:{\"label\":\"制单人\",\"prop\":\"listerName\"}},[_c('el-input',{model:{value:(_vm.saveForm.listName),callback:function ($$v) {_vm.$set(_vm.saveForm, \"listName\", $$v)},expression:\"saveForm.listName\"}})],1)],1)],1)],1),_c('el-row',[_c('el-col',{attrs:{\"offset\":20}},[_c('el-button',{on:{\"click\":_vm.saveRefund}},[_vm._v(\"保存\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.saveRefundThenNew}},[_vm._v(\"保存并新增\")])],1)],1)],1),_c('el-dialog',{attrs:{\"title\":_vm.isProductAdd ? '新增商品' : '修改商品',\"visible\":_vm.saveProductDialogVisible,\"width\":\"70%\"},on:{\"update:visible\":function($event){_vm.saveProductDialogVisible=$event},\"close\":_vm.saveProductDialogClosed}},[_c('el-form',{ref:\"saveProductFormRef\",attrs:{\"model\":_vm.saveProductForm,\"rules\":_vm.saveProductFormRules,\"label-width\":\"100px\"}},[_c('el-row',[_c('el-col',{attrs:{\"span\":8}},[_c('el-form-item',{attrs:{\"label\":\"商品\",\"prop\":\"productName\"}},[_c('el-input',{attrs:{\"placeholder\":\"请选择商品\",\"disabled\":\"\"},model:{value:(_vm.saveProductForm.productName),callback:function ($$v) {_vm.$set(_vm.saveProductForm, \"productName\", $$v)},expression:\"saveProductForm.productName\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":function($event){return _vm.showSelectProductDialog()}},slot:\"append\"})],1)],1)],1),_c('el-col',{attrs:{\"span\":8}},[_c('el-form-item',{attrs:{\"label\":\"单位\",\"prop\":\"unitName\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.saveProductForm.unitName),callback:function ($$v) {_vm.$set(_vm.saveProductForm, \"unitName\", $$v)},expression:\"saveProductForm.unitName\"}})],1)],1),_c('el-col',{attrs:{\"span\":8}},[_c('el-form-item',{attrs:{\"label\":\"仓库\",\"prop\":\"warehouseId\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择仓库\"},on:{\"change\":_vm.selectWarehouseChanged},model:{value:(_vm.saveProductForm.warehouseId),callback:function ($$v) {_vm.$set(_vm.saveProductForm, \"warehouseId\", $$v)},expression:\"saveProductForm.warehouseId\"}},_vm._l((_vm.warehouseList),function(warehouse){return _c('el-option',{key:warehouse.id,attrs:{\"label\":warehouse.name,\"value\":warehouse.id}})}),1)],1)],1)],1),_c('el-row',[_c('el-col',{attrs:{\"span\":8}},[_c('el-form-item',{attrs:{\"label\":\"数量\",\"prop\":\"quantity\"}},[_c('el-input',{model:{value:(_vm.saveProductForm.quantity),callback:function ($$v) {_vm.$set(_vm.saveProductForm, \"quantity\", $$v)},expression:\"saveProductForm.quantity\"}})],1)],1),_c('el-col',{attrs:{\"span\":8}},[_c('el-form-item',{attrs:{\"label\":\"购货单价\",\"prop\":\"price\"}},[_c('el-input',{model:{value:(_vm.saveProductForm.price),callback:function ($$v) {_vm.$set(_vm.saveProductForm, \"price\", $$v)},expression:\"saveProductForm.price\"}})],1)],1),_c('el-col',{attrs:{\"span\":8}},[_c('el-form-item',{attrs:{\"label\":\"折扣率(%)\",\"prop\":\"discountRate\"}},[_c('el-input',{model:{value:(_vm.saveProductForm.discountRate),callback:function ($$v) {_vm.$set(_vm.saveProductForm, \"discountRate\", $$v)},expression:\"saveProductForm.discountRate\"}})],1)],1)],1),_c('el-row',[_c('el-col',{attrs:{\"span\":8}},[_c('el-form-item',{attrs:{\"label\":\"折扣额\",\"prop\":\"discountAmount\"}},[_c('el-input',{model:{value:(_vm.saveProductForm.discountAmount),callback:function ($$v) {_vm.$set(_vm.saveProductForm, \"discountAmount\", $$v)},expression:\"saveProductForm.discountAmount\"}})],1)],1),_c('el-col',{attrs:{\"span\":8}},[_c('el-form-item',{attrs:{\"label\":\"购货金额\",\"prop\":\"amount\"}},[_c('el-input',{model:{value:(_vm.saveProductForm.amount),callback:function ($$v) {_vm.$set(_vm.saveProductForm, \"amount\", $$v)},expression:\"saveProductForm.amount\"}})],1)],1),_c('el-col',{attrs:{\"span\":8}},[_c('el-form-item',{attrs:{\"label\":\"序列号\",\"prop\":\"code\"}},[_c('el-input',{model:{value:(_vm.saveProductForm.code),callback:function ($$v) {_vm.$set(_vm.saveProductForm, \"code\", $$v)},expression:\"saveProductForm.code\"}})],1)],1)],1),_c('el-row',[_c('el-col',[_c('el-form-item',{attrs:{\"label\":\"备注信息\",\"prop\":\"remark\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":2,\"placeholder\":\"添加备注信息\"},model:{value:(_vm.saveProductForm.remark),callback:function ($$v) {_vm.$set(_vm.saveProductForm, \"remark\", $$v)},expression:\"saveProductForm.remark\"}})],1)],1)],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.saveProductDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.saveProduct}},[_vm._v(\"确 定\")])],1)],1),_c('select-product-dialog',{attrs:{\"visible\":_vm.selectProductDialogVisible},on:{\"update:visible\":function($event){_vm.selectProductDialogVisible=$event},\"selectProduct\":function($event){return _vm.handleSelectProduct($event)}}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <!-- 面包屑导航区域 -->\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\n      <el-breadcrumb-item>基础管理</el-breadcrumb-item>\n      <el-breadcrumb-item>退货单新增</el-breadcrumb-item>\n    </el-breadcrumb>\n\n    <!-- 卡片视图区域 -->\n    <el-card>\n      <el-form :model=\"saveForm\"\n               :rules=\"saveFormRules\"\n               ref=\"saveFormRef\"\n               label-width=\"100px\">\n        <el-row>\n          <el-col :span=\"8\">\n            <el-form-item label=\"供应商\"\n                          prop=\"supplierId\">\n              <el-select v-model=\"saveForm.supplierId\"\n                         placeholder=\"请选择供应商\">\n                <el-option v-for=\"supplier in supplierList\"\n                           :key=\"supplier.id\"\n                           :label=\"supplier.name\"\n                           :value=\"supplier.id\">\n                </el-option>\n              </el-select>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"8\">\n            <el-form-item label=\"单据日期\"\n                          prop=\"issueDate\">\n              <el-date-picker v-model=\"saveForm.issueDate\"\n                              type=\"date\"\n                              value-format='yyyy-MM-dd'\n                              placeholder=\"选择日期\">\n              </el-date-picker>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"8\">\n            <el-form-item label=\"单据编号\"\n                          prop=\"code\">\n              <el-input v-model=\"saveForm.code\"\n                        disabled></el-input>\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row>\n          <!-- 商品表格 -->\n          <el-card>\n            <!-- 搜索与添加区域 -->\n            <el-row :gutter=\"20\">\n              <el-col :span=\"4\">\n                <el-button type=\"primary\"\n                           @click=\"showProductAddDialog()\">新增商品</el-button>\n              </el-col>\n            </el-row>\n            <!-- 商品列表区域 -->\n            <el-table :data=\"saveForm.productList\"\n                      border\n                      stripe\n                      height=\"300\">\n              <el-table-column label=\"商品\"\n                               prop=\"productName\"></el-table-column>\n              <el-table-column label=\"单位\"\n                               prop=\"unitName\"></el-table-column>\n              <el-table-column label=\"仓库\"\n                               prop=\"warehouseName\"></el-table-column>\n              <el-table-column label=\"数量\"\n                               prop=\"quantity\"></el-table-column>\n              <el-table-column label=\"购货单价\"\n                               prop=\"price\"></el-table-column>\n              <el-table-column label=\"折扣率(%)\"\n                               prop=\"discountRate\"></el-table-column>\n              <el-table-column label=\"折扣额\"\n                               prop=\"discountAmount\"></el-table-column>\n              <el-table-column label=\"购货金额\"\n                               prop=\"amount\"></el-table-column>\n              <el-table-column label=\"序列号\"\n                               prop=\"code\"></el-table-column>\n              <el-table-column label=\"备注\"\n                               prop=\"remark\"></el-table-column>\n              <el-table-column label=\"操作\"\n                               width=\"120px\">\n                <template slot-scope=\"scope\">\n                  <!-- 修改按钮 -->\n                  <el-tooltip effect=\"dark\"\n                              content=\"修改\"\n                              placement=\"top\"\n                              :enterable=\"false\">\n                    <el-button type=\"primary\"\n                               icon=\"el-icon-edit\"\n                               size=\"mini\"\n                               @click=\"showProductEditDialog(scope.row, scope.$index)\"></el-button>\n                  </el-tooltip>\n                  <!-- 删除按钮 -->\n                  <el-tooltip effect=\"dark\"\n                              content=\"删除\"\n                              placement=\"top\"\n                              :enterable=\"false\">\n                    <el-button type=\"danger\"\n                               icon=\"el-icon-delete\"\n                               size=\"mini\"\n                               @click=\"deleteProduct(scope.row)\"></el-button>\n                  </el-tooltip>\n                </template>\n              </el-table-column>\n            </el-table>\n          </el-card>\n        </el-row>\n        <el-divider content-position=\"left\">结算信息</el-divider>\n        <el-row>\n          <el-col :span=\"5\">\n            <el-form-item label=\"优惠率\"\n                          prop=\"discountRate\">\n              <el-input v-model.number=\"saveForm.discountRate\">\n                <template slot=\"append\">%</template>\n              </el-input>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"5\">\n            <el-form-item label=\"优惠金额\"\n                          prop=\"discountedAmount\">\n              <el-input v-model=\"saveForm.discountedAmount\"></el-input>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"5\">\n            <el-form-item label=\"优惠后金额\"\n                          prop=\"totalAmount\">\n              <el-input v-model=\"saveForm.totalAmount\"></el-input>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"5\">\n            <el-form-item label=\"本次退款\"\n                          prop=\"refundAmount\">\n              <el-input v-model=\"saveForm.refundAmount\"></el-input>\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row>\n          <el-col :span=\"5\">\n            <el-form-item label=\"结算账户\"\n                          prop=\"accountId\">\n              <el-select v-model=\"saveForm.accountId\"\n                         placeholder=\"请选择结算账户\"\n                         @change=\"selectAccountChanged\">\n                <el-option v-for=\"account in accountList\"\n                           :key=\"account.id\"\n                           :label=\"account.name\"\n                           :value=\"account.id\">\n                </el-option>\n              </el-select>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"5\">\n            <el-form-item label=\"本次欠款\"\n                          prop=\"debtAmount\">\n              <el-input v-model=\"saveForm.debtAmount\"></el-input>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"5\">\n            <el-form-item label=\"采购合同\"\n                          prop=\"contracts\">\n              <el-input v-model=\"saveForm.contracts\"\n                        disabled></el-input>\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row>\n          <el-col :span=\"5\">\n            <el-form-item label=\"制单人\"\n                          prop=\"listerName\">\n              <el-input v-model=\"saveForm.listName\"></el-input>\n            </el-form-item>\n          </el-col>\n        </el-row>\n      </el-form>\n      <el-row>\n        <el-col :offset=\"20\">\n          <el-button @click=\"saveRefund\">保存</el-button>\n          <el-button type=\"primary\"\n                     @click=\"saveRefundThenNew\">保存并新增</el-button>\n        </el-col>\n\n      </el-row>\n    </el-card>\n\n    <!-- 保存商品对话框 -->\n    <el-dialog :title=\"isProductAdd ? '新增商品' : '修改商品'\"\n               :visible.sync=\"saveProductDialogVisible\"\n               width=\"70%\"\n               @close=\"saveProductDialogClosed\">\n      <!-- 内容主体区域 -->\n      <el-form :model=\"saveProductForm\"\n               :rules=\"saveProductFormRules\"\n               ref=\"saveProductFormRef\"\n               label-width=\"100px\">\n        <el-row>\n          <el-col :span=\"8\">\n            <el-form-item label=\"商品\"\n                          prop=\"productName\">\n              <el-input placeholder=\"请选择商品\"\n                        v-model=\"saveProductForm.productName\"\n                        disabled>\n                <el-button slot=\"append\"\n                           icon=\"el-icon-search\"\n                           @click=\"showSelectProductDialog()\"></el-button>\n              </el-input>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"8\">\n            <el-form-item label=\"单位\"\n                          prop=\"unitName\">\n              <el-input v-model=\"saveProductForm.unitName\"\n                        disabled></el-input>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"8\">\n            <el-form-item label=\"仓库\"\n                          prop=\"warehouseId\">\n              <el-select v-model=\"saveProductForm.warehouseId\"\n                         placeholder=\"请选择仓库\"\n                         @change=\"selectWarehouseChanged\">\n                <el-option v-for=\"warehouse in warehouseList\"\n                           :key=\"warehouse.id\"\n                           :label=\"warehouse.name\"\n                           :value=\"warehouse.id\">\n                </el-option>\n              </el-select>\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row>\n          <el-col :span=\"8\">\n            <el-form-item label=\"数量\"\n                          prop=\"quantity\">\n              <el-input v-model=\"saveProductForm.quantity\"></el-input>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"8\">\n            <el-form-item label=\"购货单价\"\n                          prop=\"price\">\n              <el-input v-model=\"saveProductForm.price\"></el-input>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"8\">\n            <el-form-item label=\"折扣率(%)\"\n                          prop=\"discountRate\">\n              <el-input v-model=\"saveProductForm.discountRate\"></el-input>\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row>\n          <el-col :span=\"8\">\n            <el-form-item label=\"折扣额\"\n                          prop=\"discountAmount\">\n              <el-input v-model=\"saveProductForm.discountAmount\"></el-input>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"8\">\n            <el-form-item label=\"购货金额\"\n                          prop=\"amount\">\n              <el-input v-model=\"saveProductForm.amount\"></el-input>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"8\">\n            <el-form-item label=\"序列号\"\n                          prop=\"code\">\n              <el-input v-model=\"saveProductForm.code\"></el-input>\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row>\n          <el-col>\n            <el-form-item label=\"备注信息\"\n                          prop=\"remark\">\n              <el-input type=\"textarea\"\n                        :rows=\"2\"\n                        placeholder=\"添加备注信息\"\n                        v-model=\"saveProductForm.remark\">\n              </el-input>\n            </el-form-item>\n          </el-col>\n        </el-row>\n      </el-form>\n      <!-- 底部区域 -->\n      <span slot=\"footer\"\n            class=\"dialog-footer\">\n        <el-button @click=\"saveProductDialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\"\n                   @click=\"saveProduct\">确 定</el-button>\n      </span>\n    </el-dialog>\n\n    <select-product-dialog :visible.sync=\"selectProductDialogVisible\"\n                           @selectProduct=\"handleSelectProduct($event)\"></select-product-dialog>\n  </div>\n</template>\n\n<script>\nimport Vue from 'vue'\nimport SelectProductDialog from '../common/SelectProductDialog'\nVue.component('select-product-dialog', SelectProductDialog)\n\nexport default {\n  data () {\n    return {\n      // 供应商\n      supplierList: [],\n      refundCode: '',\n      accountList: [],\n      saveForm: {\n        discountRate: 0,\n        discountedAmount: 0,\n        totalAmount: 0.00,\n        refundAmount: 0.00,\n        debtAmount: 0.00,\n        productList: [],\n        accountList: []\n      },\n      saveFormRules: {},\n      // 是否新增商品\n      isProductAdd: true,\n      modifyProductIndex: 0,\n      saveProductDialogVisible: false,\n      saveProductForm: {\n        quantity: 1.00,\n        price: 0.00,\n        discountRate: 0,\n        discountAmount: 0.00,\n        amount: 0.00\n      },\n      // 添加表单的验证规则对象\n      saveProductFormRules: {\n        productName: [\n          { required: true, message: '请选择商品', trigger: 'blur' }\n        ],\n        warehouseId: [\n          { required: true, message: '请选择仓库', trigger: 'blur' }\n        ]\n      },\n      selectProductDialogVisible: false,\n      productParams: {\n        query: {\n          categoryId: ''\n        },\n        current: 1,\n        size: 5\n      },\n      warehouseList: []\n    }\n  },\n  created () {\n    let refundId = this.$route.query.refundId\n    if (refundId !== undefined) {\n      this.getRefundDetail(refundId)\n    } else {\n      this.getRefundCode()\n    }\n\n    this.getSupplierList()\n    this.getAccountList()\n    this.getWarehouseList()\n  },\n  methods: {\n    // 获取供应商列表\n    async getSupplierList () {\n      const { data: result } = await this.$http.post('/supplier/page', {\n        current: 1,\n        size: 10000\n      })\n      if (!result.success) return this.$message.error(result.message)\n\n      this.supplierList = result.data.supplierPage.records\n    },\n    // 获取单据编号\n    async getRefundCode () {\n      const { data: result } = await this.$http.post('/refund/createCode')\n      if (!result.success) return this.$message.error(result.message)\n\n      this.saveForm = {\n        discountRate: 0,\n        discountedAmount: 0,\n        totalAmount: 0.00,\n        refundAmount: 0.00,\n        debtAmount: 0.00,\n        productList: [],\n        accountList: []\n      }\n\n      this.refundCode = result.data.code\n      this.saveForm.code = this.refundCode\n    },\n    // 获取结算账户列表\n    async getAccountList () {\n      const { data: result } = await this.$http.post('/settlementAccount/list')\n      if (!result.success) return this.$message.error(result.message)\n\n      this.accountList = result.data.accountList\n    },\n    // 获取详情\n    async getRefundDetail (refundId) {\n      const { data: result } = await this.$http.post('/refund/detail', {\n        refundId\n      })\n      if (!result.success) return this.$message.error(result.message)\n\n      console.log(result.data)\n      this.saveForm = result.data.refund\n    },\n    // 选择了结算账户\n    selectAccountChanged (accountId) {\n      this.saveForm.accountList = []\n      var account = {\n        accountId\n      }\n      this.saveForm.accountList.push(account)\n    },\n    // 点击按钮，保存退货单\n    async saveRefund () {\n      this.$refs.saveFormRef.validate(async valid => {\n        if (!valid) return\n        // 可以发起新增退货单的网络请求\n        const { data: result } = await this.$http.post('/refund/save', {\n          refund: this.saveForm,\n          productList: this.saveForm.productList,\n          accountList: this.saveForm.accountList\n        })\n        if (!result.success) {\n          return this.$message.error(result.message)\n        }\n\n        this.$message.success('保存退货单成功！')\n      })\n    },\n    // 保存并新增\n    async saveRefundThenNew () {\n      this.saveRefund()\n      this.getRefundCode()\n    },\n    // 显示保存商品对话框\n    showProductAddDialog () {\n      this.isProductAdd = true\n      this.saveProductForm = {\n        quantity: 1.00,\n        price: 0.00,\n        discountRate: 0,\n        discountAmount: 0.00,\n        amount: 0.00\n      }\n      this.saveProductDialogVisible = true\n    },\n    // 显示修改商品对话框\n    showProductEditDialog (contact, index) {\n      this.isProductAdd = false\n      this.saveProductForm = this.$_.cloneDeep(contact)\n      this.modifyProductIndex = index\n      this.saveProductDialogVisible = true\n    },\n\n    // 监听新增商品对话框的关闭事件\n    saveProductDialogClosed () {\n      if (this.isProductAdd) {\n        this.$refs.saveProductFormRef.resetFields()\n      }\n    },\n    // 点击按钮，添加商品\n    saveProduct () {\n      this.$refs.saveProductFormRef.validate(async valid => {\n        if (!valid) return\n\n        var product = this.$_.cloneDeep(this.saveProductForm)\n\n        // 修改\n        if (!this.isProductAdd) {\n          this.saveForm.productList.splice(this.modifyProductIndex, 1, product)\n\n          this.$message.success('修改商品成功！')\n        } else {\n          // 新增\n          this.saveForm.productList.push(product)\n          this.$message.success('添加商品成功！')\n        }\n\n        // 隐藏添加商品的对话框\n        this.saveProductDialogVisible = false\n      })\n    },\n    // 删除商品\n    async deleteProduct (product) {\n      // 弹框询问用户是否删除数据\n      const confirmResult = await this.$confirm(\n        '删除该商品，是否继续?',\n        '提示',\n        {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }\n      ).catch(err => err)\n\n      // 如果用户确认删除，则返回值为字符串 confirm\n      // 如果用户取消了删除，则返回值为字符串 cancel\n      if (confirmResult !== 'confirm') {\n        return this.$message.info('已取消删除')\n      }\n\n      this.saveForm.productList.splice(\n        this.saveForm.productList.findIndex(existedProduct => existedProduct === product),\n        1\n      )\n\n      this.$message.success('删除商品成功！')\n    },\n    // 显示选择商品对话框\n    showSelectProductDialog () {\n      this.selectProductDialogVisible = true\n    },\n    // 选择好商品\n    handleSelectProduct (product) {\n      if (product != null) {\n        this.saveProductForm.productName = product.name\n        this.saveProductForm.productId = product.id\n        this.saveProductForm.unitName = product.unitName\n      }\n    },\n    // 获取仓库列表\n    async getWarehouseList () {\n      const { data: result } = await this.$http.post('/warehouse/page', {\n        current: 1,\n        size: 10000\n      })\n      if (!result.success) return this.$message.error(result.message)\n\n      this.warehouseList = result.data.warehousePage.records\n    },\n    // 选择了仓库\n    selectWarehouseChanged (warehouseId) {\n      var warehouse = this.$_.find(this.warehouseList, { 'id': warehouseId })\n      if (warehouse !== undefined) {\n        this.saveProductForm.warehouseName = warehouse.name\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.query {\n  margin-bottom: 20px;\n}\n.el-select {\n  width: 100%;\n}\n.el-date-editor {\n  width: 100%;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Save.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Save.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Save.vue?vue&type=template&id=420072eb&scoped=true&\"\nimport script from \"./Save.vue?vue&type=script&lang=js&\"\nexport * from \"./Save.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Save.vue?vue&type=style&index=0&id=420072eb&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"420072eb\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/home' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"基础管理\")]),_c('el-breadcrumb-item',[_vm._v(\"退货单列表\")])],1),_c('el-card',[_c('el-row',{staticClass:\"query\",attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":7}},[_c('el-date-picker',{attrs:{\"type\":\"daterange\",\"value-format\":\"yyyy-MM-dd\",\"range-separator\":\"至\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\"},model:{value:(_vm.rangedDate),callback:function ($$v) {_vm.rangedDate=$$v},expression:\"rangedDate\"}})],1),_c('el-col',{attrs:{\"span\":8}},[_c('el-input',{attrs:{\"placeholder\":\"请输入单据号/供应商/序列号查询\",\"clearable\":\"\"},on:{\"clear\":_vm.getRefundPage},model:{value:(_vm.params.query.name),callback:function ($$v) {_vm.$set(_vm.params.query, \"name\", $$v)},expression:\"params.query.name\"}})],1),_c('el-col',{attrs:{\"span\":1.5}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.search}},[_vm._v(\"查询\")])],1),_c('el-col',{attrs:{\"span\":1.5}},[_c('el-button',{attrs:{\"type\":\"success\"},on:{\"click\":_vm.clear}},[_vm._v(\"重置\")])],1)],1),_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":1.5}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.goAddPage()}}},[_vm._v(\"新增\")])],1)],1),_c('el-table',{attrs:{\"data\":_vm.refundList,\"border\":\"\",\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"index\"}}),_c('el-table-column',{attrs:{\"label\":\"单据日期\",\"prop\":\"issueDate\"}}),_c('el-table-column',{attrs:{\"label\":\"单据编号\",\"prop\":\"code\"}}),_c('el-table-column',{attrs:{\"label\":\"供应商\",\"prop\":\"supplierName\"}}),_c('el-table-column',{attrs:{\"label\":\"购货金额\",\"prop\":\"totalAmount\"}}),_c('el-table-column',{attrs:{\"label\":\"优惠后金额\",\"prop\":\"discountedAmount\"}}),_c('el-table-column',{attrs:{\"label\":\"已退款\",\"prop\":\"refundAmount\"}}),_c('el-table-column',{attrs:{\"label\":\"退款状态\",\"prop\":\"refundStatus\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.refundStatus = 10)?_c('span',[_vm._v(\"\\n            未退款\\n          \")]):(scope.row.refundStatus = 20)?_c('span',[_vm._v(\"\\n            部分退款\\n          \")]):(scope.row.refundStatus = 30)?_c('span',[_vm._v(\"\\n            已退款\\n          \")]):_vm._e()]}}])}),_c('el-table-column',{attrs:{\"label\":\"数量\",\"prop\":\"quantity\"}}),_c('el-table-column',{attrs:{\"label\":\"制单人\",\"prop\":\"listerName\"}}),_c('el-table-column',{attrs:{\"label\":\"审核人\",\"prop\":\"auditorName\"}}),_c('el-table-column',{attrs:{\"label\":\"审核状态\",\"width\":\"70px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-switch',{on:{\"change\":function($event){return _vm.refundCheckedSwitch(scope.row)}},model:{value:(scope.row.checked),callback:function ($$v) {_vm.$set(scope.row, \"checked\", $$v)},expression:\"scope.row.checked\"}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"备注\",\"prop\":\"remark\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"120px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tooltip',{attrs:{\"effect\":\"dark\",\"content\":\"修改\",\"placement\":\"top\",\"enterable\":false}},[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.goEditPage(scope.row.id)}}})],1),_c('el-tooltip',{attrs:{\"effect\":\"dark\",\"content\":\"删除\",\"placement\":\"top\",\"enterable\":false}},[_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.deleteRefund(scope.row.id)}}})],1)]}}])})],1),_c('el-pagination',{attrs:{\"current-page\":_vm.params.current,\"page-sizes\":[1, 2, 5, 10],\"page-size\":_vm.params.size,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <!-- 面包屑导航区域 -->\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\n      <el-breadcrumb-item>基础管理</el-breadcrumb-item>\n      <el-breadcrumb-item>退货单列表</el-breadcrumb-item>\n    </el-breadcrumb>\n\n    <!-- 卡片视图区域 -->\n    <el-card>\n      <!-- 搜索与添加区域 -->\n      <el-row :gutter=\"20\"\n              class=\"query\">\n        <el-col :span=\"7\">\n          <el-date-picker v-model=\"rangedDate\"\n                          type=\"daterange\"\n                          value-format='yyyy-MM-dd'\n                          range-separator=\"至\"\n                          start-placeholder=\"开始日期\"\n                          end-placeholder=\"结束日期\">\n          </el-date-picker>\n        </el-col>\n        <el-col :span=\"8\">\n          <el-input placeholder=\"请输入单据号/供应商/序列号查询\"\n                    v-model=\"params.query.name\"\n                    clearable\n                    @clear=\"getRefundPage\">\n          </el-input>\n        </el-col>\n        <el-col :span=\"1.5\">\n          <el-button type=\"primary\"\n                     @click=\"search\">查询</el-button>\n        </el-col>\n        <el-col :span=\"1.5\">\n          <el-button type=\"success\"\n                     @click=\"clear\">重置</el-button>\n        </el-col>\n      </el-row>\n      <el-row :gutter=\"20\">\n        <el-col :span=\"1.5\">\n          <el-button type=\"primary\"\n                     @click=\"goAddPage()\">新增</el-button>\n        </el-col>\n      </el-row>\n\n      <!-- 列表区域 -->\n      <el-table :data=\"refundList\"\n                border\n                stripe>\n        <el-table-column type=\"index\"></el-table-column>\n        <el-table-column label=\"单据日期\"\n                         prop=\"issueDate\"></el-table-column>\n        <el-table-column label=\"单据编号\"\n                         prop=\"code\"></el-table-column>\n        <el-table-column label=\"供应商\"\n                         prop=\"supplierName\"></el-table-column>\n        <el-table-column label=\"购货金额\"\n                         prop=\"totalAmount\"></el-table-column>\n        <el-table-column label=\"优惠后金额\"\n                         prop=\"discountedAmount\"></el-table-column>\n        <el-table-column label=\"已退款\"\n                         prop=\"refundAmount\"></el-table-column>\n        <el-table-column label=\"退款状态\"\n                         prop=\"refundStatus\">\n          <template slot-scope=\"scope\">\n            <span v-if=\"scope.row.refundStatus = 10\">\n              未退款\n            </span>\n            <span v-else-if=\"scope.row.refundStatus = 20\">\n              部分退款\n            </span>\n            <span v-else-if=\"scope.row.refundStatus = 30\">\n              已退款\n            </span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"数量\"\n                         prop=\"quantity\"></el-table-column>\n        <el-table-column label=\"制单人\"\n                         prop=\"listerName\">\n        </el-table-column>\n        <el-table-column label=\"审核人\"\n                         prop=\"auditorName\">\n        </el-table-column>\n        <el-table-column label=\"审核状态\"\n                         width=\"70px\">\n          <template slot-scope=\"scope\">\n            <el-switch v-model=\"scope.row.checked\"\n                       @change=\"refundCheckedSwitch(scope.row)\">\n            </el-switch>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"备注\"\n                         prop=\"remark\">\n        </el-table-column>\n        <el-table-column label=\"操作\"\n                         width=\"120px\">\n          <template slot-scope=\"scope\">\n            <!-- 修改按钮 -->\n            <el-tooltip effect=\"dark\"\n                        content=\"修改\"\n                        placement=\"top\"\n                        :enterable=\"false\">\n              <el-button type=\"primary\"\n                         icon=\"el-icon-edit\"\n                         size=\"mini\"\n                         @click=\"goEditPage(scope.row.id)\"></el-button>\n            </el-tooltip>\n            <!-- 删除按钮 -->\n            <el-tooltip effect=\"dark\"\n                        content=\"删除\"\n                        placement=\"top\"\n                        :enterable=\"false\">\n              <el-button type=\"danger\"\n                         icon=\"el-icon-delete\"\n                         size=\"mini\"\n                         @click=\"deleteRefund(scope.row.id)\"></el-button>\n            </el-tooltip>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <!-- 分页区域 -->\n      <el-pagination @size-change=\"handleSizeChange\"\n                     @current-change=\"handleCurrentChange\"\n                     :current-page=\"params.current\"\n                     :page-sizes=\"[1, 2, 5, 10]\"\n                     :page-size=\"params.size\"\n                     layout=\"total, sizes, prev, pager, next, jumper\"\n                     :total=\"total\">\n      </el-pagination>\n    </el-card>\n  </div>\n</template>\n\n<script>\nexport default {\n  data () {\n    return {\n      // 获取退货列表的参数对象\n      params: {\n        query: {\n        },\n        // 当前的页数\n        current: 1,\n        // 当前每页显示多少条数据\n        size: 5\n      },\n      total: 0,\n      refundList: [],\n      rangedDate: null\n    }\n  },\n  watch: {\n  },\n  created () {\n    this.getRefundPage()\n  },\n  methods: {\n    // 搜索\n    search () {\n      if (this.rangedDate != null) {\n        this.params.query.startDate = this.rangedDate[0]\n        this.params.query.endDate = this.rangedDate[1]\n      } else {\n        this.params.query.startDate = ''\n        this.params.query.endDate = ''\n      }\n      this.getRefundPage()\n    },\n    // 清空\n    clear () {\n      this.rangedDate = null\n      this.params.query = {}\n      this.getRefundPage()\n    },\n    // 获取退货单分页列表\n    async getRefundPage () {\n      const { data: result } = await this.$http.post('/refund/page', this.params)\n      if (!result.success) return this.$message.error(result.message)\n\n      this.refundList = result.data.refundPage.records\n\n      this.total = result.data.refundPage.total\n    },\n    // 监听 pagesize 改变的事件\n    handleSizeChange (size) {\n      this.params.size = size\n      this.getRefundPage()\n    },\n    // 监听 页码值 改变的事件\n    handleCurrentChange (current) {\n      this.params.current = current\n      this.getRefundPage()\n    },\n    // 新增按钮\n    goAddPage () {\n      this.$router.push('/refund/save')\n    },\n    // 修改按钮\n    goEditPage (refundId) {\n      this.$router.push({\n        path: '/refund/save',\n        query: { refundId }\n      })\n    },\n    // 退货单审核状态改变\n    async refundCheckedSwitch (refund) {\n      const { data: result } = await this.$http.post(\n        '/refund/switchCheck',\n        {\n          'refundId': refund.id\n        }\n      )\n      if (!result.success) {\n        refund.checked = !refund.checked\n        return this.$message.error('更新审核状态失败！')\n      }\n      refund.checked = result.data.refund.checked\n      this.$message.success('更新审核状态成功！')\n    },\n    // 删除退货单\n    async deleteRefund (refundId) {\n      // 弹框询问用户是否删除数据\n      const confirmResult = await this.$confirm(\n        '此操作将永久删除该退货单，是否继续?',\n        '提示',\n        {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }\n      ).catch(err => err)\n\n      // 如果用户确认删除，则返回值为字符串 confirm\n      // 如果用户取消了删除，则返回值为字符串 cancel\n      if (confirmResult !== 'confirm') {\n        return this.$message.info('已取消删除')\n      }\n\n      const { data: result } = await this.$http.post('/refund/delete', { refundId })\n\n      if (!result.success) {\n        return this.$message.error('删除退货单失败！')\n      }\n\n      this.$message.success('删除退货单成功！')\n      this.getRefundPage()\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.query {\n  margin-bottom: 20px;\n}\n.el-select {\n  width: 100%;\n}\n.el-date-editor {\n  width: 100%;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./List.vue?vue&type=template&id=7af2ee58&scoped=true&\"\nimport script from \"./List.vue?vue&type=script&lang=js&\"\nexport * from \"./List.vue?vue&type=script&lang=js&\"\nimport style0 from \"./List.vue?vue&type=style&index=0&id=7af2ee58&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7af2ee58\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=style&index=0&id=7af2ee58&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=style&index=0&id=7af2ee58&lang=less&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Save.vue?vue&type=style&index=0&id=420072eb&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Save.vue?vue&type=style&index=0&id=420072eb&lang=less&scoped=true&\""],"sourceRoot":""}